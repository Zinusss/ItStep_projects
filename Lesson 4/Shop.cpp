
#include <iostream>
#include <string>
#include <list>
using namespace std;
int buy(list<string>& items, int& bal, int& milk, int& bread, int& butter, int& milk_user, int& bread_user, int& butter_user, int& shop_bal);
int report(list<string>& items);
int login(int& password, list<string>& items, int& bal, int& milk, int& bread, int& butter, int& milk_user, int& bread_user, int& butter_user, int& shop_bal);
int returned(list<string>& items, int& bal, int& milk, int& bread, int& butter, int& milk_user, int& bread_user, int& butter_user, int& shop_bal);
int admins(int& password);
int seller(list<string>& items, int& bal, int& milk, int& bread, int& butter, int& milk_user, int& bread_user, int& butter_user, int& shop_bal);
int cleaner();
int guardian();
string random_action();
string random_action_guardian();


int main() {
    list<string> items = { "?????? - 50???", "???? - 20 ???","????? - 90 ???" };
    int bal, shop_bal;
    string first_ext;
    int milk, bread, butter;
    int milk_user, bread_user, butter_user = 0;
    int password = 6754;
    milk = 10;
    bread = 15;
    shop_bal = 1000;
    butter = 3;
    bal = 1000;
    cout << "???????? ???: \n";
    cout << "1. ?????? ????? \n";
    cout << "2. ???????????? \n";
    cout << "3. ?????????? ?????? \n";
    cout << "4. ???? ? ??????\n";
    cout << "??????? ????? ???: \n";
    cin >> first_ext;
    if (first_ext == "1") {
        buy(items, bal, milk, bread, butter, milk_user, bread_user, butter_user, shop_bal);


    }
    else if (first_ext == "2") {
        report(items);

    }
    else if (first_ext == "3") {
        returned(items, bal, milk, bread, butter, milk_user, bread_user, butter_user, shop_bal);
    }
    else if (first_ext == "4") {
        login(password, items, bal, milk, bread, butter, milk_user, bread_user, butter_user, shop_bal);
    }
    return 0;
}
int buy(list<string>& items, int& bal, int& milk, int& bread, int& butter, int& milk_user, int& bread_user, int& butter_user, int& shop_bal) {
    int count;
    int choose_item;
    string answer;
    int i = 0;
    cout << "???????? ?????: \n";
    for (string item : items) {
        i++;
        cout << i << ". " << item << "\n";
    }
    cin >> choose_item;
    cout << "??????? ????????? ??????: \n";
    cin >> count;
    if (choose_item == 1) {
        bal -= (50 * count);
        shop_bal += (50 * count);
        milk_user += count;
        milk -= count;
        cout << "????? ?? ???????? \n";
        cout << "????? ?????????? \n";
        cout << "????? ?? ???????! \n ??? ??????: " + bal;
    }
    else if (choose_item == 2) {
        bal -= (20 * count);
        shop_bal += (20 * count);
        bread_user += count;
        bread -= count;
        cout << "????? ?? ???????? \n";
        cout << "????? ?????????? \n";
        cout << "????? ?? ???????! \n ??? ??????: " + bal;
    }
    else if (choose_item == 3) {
        bal -= (90 * count);
        shop_bal += (90 * count);
        butter_user += count;
        butter -= count;
        cout << "????? ?? ???????? \n";
        cout << "????? ?????????? \n";
        cout << "????? ?? ???????! \n ??? ??????: " + bal;
    }
    else {
        cout << "???????? ?????";
    }
    cout << "?????? ????????? ??????";
    cin >> answer;
    if (answer == "???") { //????? ??????? ??? ?????????? ???????? ???? ??? ?? ???? ????????? ??
        returned(items, bal, milk, bread, butter, milk_user, bread_user, butter_user, shop_bal);
    }
    else if (answer == "???") { //????? ??????? ??? ?????????? ???????? ???? ??? ?? ???? ????????? ??
        returned(items, bal, milk, bread, butter, milk_user, bread_user, butter_user, shop_bal);
    }
    main();
    return 0;
}
int report(list<string>& items) {
    int choose_item;
    int i = 0;
    int ii = 0;
    cout << "???????? ????? ??? ??????: \n";
    for (string item : items) {
        i++;
        cout << i << ". " << item << "\n";
    }
    cin >> choose_item;
    if (choose_item == 1) {
        items.remove("?????? - 50???");
        cout << "????? ?????????! \n";
        cout << "????????? ?????? ???????! \n";
        for (string item : items) {
            ii++;
            cout << ii << ". " << item << "\n";
        }
    }
    else if (choose_item == 2) {
        items.remove("???? - 20 ???");
        cout << "????? ?????????! \n";
        cout << "????????? ?????? ???????! \n";
        for (string item : items) {
            ii++;
            cout << ii << ". " << item << "\n";
        }
    }
    else if (choose_item == 3) {
        items.remove("????? - 90 ???");
        cout << "????? ?????????! \n";
        cout << "????????? ?????? ???????! \n";
        for (string item : items) {
            ii++;
            cout << ii << ". " << item << "\n";
        }
    }
    else {
        cout << "???????? ?????";
    }
    main();
    return 0;
}
int returned(list<string>& items, int& bal, int& milk, int& bread, int& butter, int& milk_user, int& bread_user, int& butter_user, int& shop_bal) {
    int count;
    int choose_item;
    int i = 0;
    cout << "???????? ????? ??? ??????????: \n";
    for (string item : items) {
        i++;
        cout << i << ". " << item << "\n";
    }
    cin >> choose_item;
    cout << "??????? ????????? ?????? : \n";
    cin >> count;
    if (choose_item == 1) {
        if (count <= milk_user) {
            bal += (50 * count);
            shop_bal -= (50 * count);
            milk_user -= count;
            milk += count;
            cout << "??????? ??????????! \n ??? ??????: " + bal;
        }
        else {
            cout << "??????????? ??????! \n ??? ??????: " + bal;
        }
    }
    else if (choose_item == 2) {
        if (count <= bread) {
            bal += (20 * count);
            shop_bal -= (20 * count);
            bread_user -= count;
            bread += count;
            cout << "??????? ??????????! \n ??? ??????: " + bal;

        }
        else {
            cout << "??????????? ??????! \n ??? ??????: " + bal;
        }
    }
    else if (choose_item == 3) {
        if (count <= bread) {
            bal += (90 * count);
            shop_bal -= (90 * count);
            butter_user -= count;
            butter += count;
            cout << "??????? ??????????! \n ??? ??????: " + bal;

        }
        else {
            cout << "??????????? ??????! \n ??? ??????: " + bal;
        }
    }
    else {
        cout << "???????? ?????";
    }
    main();
    return 0;

}
string random_action() {
    int random = rand() % 3;
    string action;
    if (random == 0) {
        action = "???????? ???????";
    }
    else if (random == 1) {
        action = "?????? ??????";
    }
    else if (random == 2) {
        action = "??????? ????????";
    }
    else if (random == 3) {
        action = "??????? ?????????";
    }
    return action;
}
class Settings {
public:


    int documents() {
        cout << "????????? ?? ????? ? ?????! \n";
        cout << "????????? ?? ?????????? ? ?????! \n";
        return 0;
    };
    int workers_count;

};
int login(int& password, list<string>& items, int& bal, int& milk, int& bread, int& butter, int& milk_user, int& bread_user, int& butter_user, int& shop_bal) {
    int answer;

    int pass_answer;
    cout << "???????? ??????: \n";
    cout << "1. ????????????? \n";
    cout << "2. ????????? \n";
    cout << "3. ????????? \n";
    cout << "??????? ????? ???: \n";
    cin >> answer;
    if (answer == 1) {
        cout << "??????? ??????: \n";
        cin >> pass_answer;
        if (pass_answer == password) {
            admins(password);
        }
        else {
            cout << "???????????? ?????? \n";
            main();
        };
    }
    else if (answer == 2) {
        seller(items, bal, milk, bread, butter, milk_user, bread_user, butter_user, shop_bal);

    }
    else if (answer == 3) {
        guardian();
    }
    return 0;
};
int admins(int& password) {
    Settings admins;
    int answer, admins_count, password_answer;

    admins.workers_count = 2;
    cout << "???????? ???: \n";
    cout << "1. ??????? ?-??? ??????? \n";
    cout << "2. ??????? ?????? \n";
    cout << "3. ??????? ????? \n";
    cout << "4. ?????? ????? \n";
    cout << "5. ???????? ????? \n";
    cout << "??????? ????? ???: \n";
    cin >> answer;
    if (answer == 1) {
        cout << "??????? ???? ????????? ??????? \n";
        cin >> admins_count;
        admins.workers_count = admins_count;
    }
    else if (answer == 2) {
        cout << "??????? ????? ??????: \n";
        cin >> password_answer;
        password = password_answer;
        cout << "????? ??????: " + password;
    }
    else if (answer == 3) {
        cout << random_action() + "\n";
    }
    else if (answer == 4) {
        cout << random_action() + "\n";
    }
    else if (answer == 5) {
        cout << random_action() + "\n";
    }
    main();
    return 0;
};
int seller(list<string>& items, int& bal, int& milk, int& bread, int& butter, int& milk_user, int& bread_user, int& butter_user, int& shop_bal) {
    Settings sellers;
    sellers.workers_count = 5;
    int count, choose_item, answer;
    int i = 0;
    cout << "???????? ???: \n";
    cout << "1. ??????? ?-??? ??????? \n";
    cout << "2. ??????? ?????? \n";
    cout << "??????? ????? ???: \n";
    cin >> answer;
    if (answer == 1) {
        cout << "???????? ????? ??? ???????: \n";
        for (string item : items) {
            i++;
            cout << i << ". " << item << "\n";
        }
        cin >> choose_item;
        cout << "??????? ????????? ?????? : \n";
        cin >> count;
        if (choose_item == 1) {
            if (count <= milk_user) {
                shop_bal += (90 * count);
                milk -= count;
                cout << "???????? ??????! \n  ?????? ????????: " + shop_bal;
            }
            else {
                cout << "??????????? ??????! \n ?????? ????????: " + shop_bal;
            }
        }
        else if (choose_item == 2) {
            if (count <= bread) {
                shop_bal += (20 * count);
                bread -= count;
                cout << "???????? ??????! \n  ?????? ????????: " + shop_bal;
            }
            else {
                cout << "??????????? ??????! \n ?????? ????????: " + shop_bal;
            }
        }
        else if (choose_item == 3) {
            if (count <= bread) {
                shop_bal += (90 * count);
                butter -= count;
                cout << "???????? ??????! \n ?????? ????????: " + shop_bal;
            }
            else {
                cout << "??????????? ??????! \n ?????? ????????: " + shop_bal;
            }
        }
        else {
            cout << "???????? ?????";
        }
    }
    else if (answer == 2) {
        int item_choose, item_choose2;
        cout << "???????? ?????? ????? ??? ??????: \n";
        for (string item : items) {
            i++;
            cout << i << ". " << item << "\n";
        }
        cin >> item_choose;
        cout << "???????? ?????? ????? ??? ??????: \n";
        cin >> item_choose2;
        if (item_choose == 1 && item_choose == 2) {
            if (milk > 1) {
                milk -= 1;
                bread += 1;
                cout << "???????? ?????!";
            }
        }
        else if (item_choose == 1 && item_choose == 3) {
            if (milk > 1) {
                milk -= 1;
                butter += 1;
                cout << "???????? ?????!";
            }

        }
        else if (item_choose == 2 && item_choose == 1) {
            if (bread > 1) {
                bread -= 1;
                milk += 1;
                cout << "???????? ?????!";
            }
        }
        else if (item_choose == 2 && item_choose == 3) {
            if (bread > 1) {
                bread -= 1;
                butter += 1;
                cout << "???????? ?????!";
            }
        }
        else if (item_choose == 3 && item_choose == 1) {
            if (butter > 1) {
                butter -= 1;
                milk += 1;
                cout << "???????? ?????!";
            }
        }
        else if (item_choose == 3 && item_choose == 2) {
            if (butter > 1) {
                butter -= 1;
                bread += 1;
                cout << "???????? ?????!";
            }
        }
        else {
            cout << "???????? ???? ? ???????!";
        }
    }


    main();
    return 0;
};
string random_action_guardian() {
    int random = rand() % 3;
    string action;
    if (random == 0) {
        action = "????????";
    }
    else if (random == 1) {
        action = "??????????? ??????";
    }
    else if (random == 2) {
        action = "?????";
    }
    else if (random == 3) {
        action = "?????? ?? ????????????";
    }
    return action;
}
int cleaner() {
    Settings cleaners;
    int answer;

    cleaners.workers_count = 3;

    main();
    return 0;
};
int guardian() {
    Settings guardians;
    int answer;

    guardians.workers_count = 3;
    cout << "???????? ???: \n";
    cout << "1. ?????????? ?? ??????? \n";
    cout << "2. ??????????? ???????? \n";

    cout << "??????? ????? ???: \n";
    cin >> answer;
    if (answer == 1) {
        cout << "?? ????????? ?? ???????! \n";
    }
    else if (answer == 2) {
        cout << random_action_guardian() + "\n";
    }

    main();
    return 0;
}

